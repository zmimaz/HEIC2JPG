<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Generate OG Image</title>
    <style>
        body { margin: 0; padding: 20px; background: #f1f5f9; font-family: 'Inter', Arial, sans-serif; }
        .instructions { max-width: 800px; margin: 0 auto 20px; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .instructions h1 { font-size: 20px; color: #1e293b; margin-bottom: 10px; }
        .instructions p { color: #64748b; font-size: 14px; line-height: 1.6; }
        .instructions ol { color: #475569; font-size: 14px; line-height: 2; }
        .instructions code { background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-size: 13px; }
        canvas { display: block; margin: 20px auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
        .download-btn { display: block; width: 200px; margin: 20px auto; padding: 12px 24px; background: linear-gradient(135deg, #3b82f6, #6366f1); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; text-align: center; }
        .download-btn:hover { opacity: 0.9; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="instructions">
        <h1>üì∏ OG Image Generator for HEIC2JPG</h1>
        <p>This page generates the <code>og-image.png</code> file (1200√ó630px) for social media sharing previews (Facebook, Twitter/X, WeChat, LinkedIn, etc.).</p>
        <ol>
            <li><strong>If you have a custom domain</strong>, change it in the box below first</li>
            <li>Wait for the image to render below (it loads the Inter font first)</li>
            <li>Click the <strong>"Download og-image.png"</strong> button</li>
            <li>Place the downloaded <code>og-image.png</code> file in your project root (same folder as <code>index.html</code>)</li>
            <li>Deploy to Cloudflare Pages ‚Äî the OG meta tags in <code>index.html</code> already reference it</li>
        </ol>
        <div style="margin-top: 12px; padding: 12px; background: #eff6ff; border-radius: 8px; border: 1px solid #bfdbfe;">
            <label style="font-weight: 600; font-size: 14px; color: #1e40af;">‚öôÔ∏è Your domain:</label>
            <input id="domainInput" type="text" value="zmimaz.qzz.io" 
                   style="margin-left: 8px; padding: 6px 12px; border: 1px solid #93c5fd; border-radius: 6px; font-size: 14px; width: 300px; font-family: monospace;"
                   oninput="drawOGImage()">
            <span style="font-size: 12px; color: #6b7280; margin-left: 8px;">Change this if you use a custom domain</span>
        </div>
    </div>

    <canvas id="canvas" width="1200" height="630"></canvas>
    <button class="download-btn" onclick="downloadImage()">‚¨á Download og-image.png</button>

    <script>
    function drawOGImage() {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const W = 1200, H = 630;

        // === Background gradient ===
        const bgGrad = ctx.createLinearGradient(0, 0, W, H);
        bgGrad.addColorStop(0, '#f8fafc');
        bgGrad.addColorStop(0.5, '#eff6ff');
        bgGrad.addColorStop(1, '#eef2ff');
        ctx.fillStyle = bgGrad;
        ctx.fillRect(0, 0, W, H);

        // === Decorative circles ===
        // Top-right large circle
        const c1 = ctx.createRadialGradient(1050, 80, 0, 1050, 80, 250);
        c1.addColorStop(0, 'rgba(99, 102, 241, 0.12)');
        c1.addColorStop(1, 'rgba(99, 102, 241, 0)');
        ctx.fillStyle = c1;
        ctx.beginPath();
        ctx.arc(1050, 80, 250, 0, Math.PI * 2);
        ctx.fill();

        // Bottom-left circle
        const c2 = ctx.createRadialGradient(150, 550, 0, 150, 550, 200);
        c2.addColorStop(0, 'rgba(59, 130, 246, 0.1)');
        c2.addColorStop(1, 'rgba(59, 130, 246, 0)');
        ctx.fillStyle = c2;
        ctx.beginPath();
        ctx.arc(150, 550, 200, 0, Math.PI * 2);
        ctx.fill();

        // Middle-right circle
        const c3 = ctx.createRadialGradient(1100, 400, 0, 1100, 400, 180);
        c3.addColorStop(0, 'rgba(16, 185, 129, 0.08)');
        c3.addColorStop(1, 'rgba(16, 185, 129, 0)');
        ctx.fillStyle = c3;
        ctx.beginPath();
        ctx.arc(1100, 400, 180, 0, Math.PI * 2);
        ctx.fill();

        // === Logo icon (rounded rect with image icon) ===
        const logoX = 80, logoY = 60, logoSize = 56;
        // Rounded rectangle
        const rad = 14;
        const gradient = ctx.createLinearGradient(logoX, logoY, logoX + logoSize, logoY + logoSize);
        gradient.addColorStop(0, '#3b82f6');
        gradient.addColorStop(1, '#6366f1');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.moveTo(logoX + rad, logoY);
        ctx.lineTo(logoX + logoSize - rad, logoY);
        ctx.quadraticCurveTo(logoX + logoSize, logoY, logoX + logoSize, logoY + rad);
        ctx.lineTo(logoX + logoSize, logoY + logoSize - rad);
        ctx.quadraticCurveTo(logoX + logoSize, logoY + logoSize, logoX + logoSize - rad, logoY + logoSize);
        ctx.lineTo(logoX + rad, logoY + logoSize);
        ctx.quadraticCurveTo(logoX, logoY + logoSize, logoX, logoY + logoSize - rad);
        ctx.lineTo(logoX, logoY + rad);
        ctx.quadraticCurveTo(logoX, logoY, logoX + rad, logoY);
        ctx.closePath();
        ctx.fill();

        // Image icon inside logo
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 2.5;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        const ix = logoX + 14, iy = logoY + 14, iw = 28, ih = 28;
        // Mountain-like image icon
        ctx.beginPath();
        ctx.moveTo(ix + 4, iy + ih - 4);
        ctx.lineTo(ix + 10, iy + 12);
        ctx.lineTo(ix + 15, iy + 17);
        ctx.lineTo(ix + 19, iy + 13);
        ctx.lineTo(ix + iw - 4, iy + ih - 4);
        ctx.stroke();
        // Sun
        ctx.beginPath();
        ctx.arc(ix + iw - 10, iy + 10, 4, 0, Math.PI * 2);
        ctx.stroke();

        // === Logo text ===
        ctx.font = '800 28px Inter, Arial, sans-serif';
        ctx.fillStyle = '#1e293b';
        ctx.fillText('HEIC', logoX + logoSize + 14, logoY + 38);
        ctx.fillStyle = '#3b82f6';
        ctx.fillText('2', logoX + logoSize + 14 + ctx.measureText('HEIC').width, logoY + 38);
        ctx.fillStyle = '#1e293b';
        ctx.fillText('JPG', logoX + logoSize + 14 + ctx.measureText('HEIC2').width, logoY + 38);

        // === Main Title ===
        ctx.font = '800 62px Inter, Arial, sans-serif';
        ctx.fillStyle = '#0f172a';
        ctx.fillText('HEIC to JPG Converter', 80, 230);

        // Chinese subtitle
        ctx.font = '700 36px Inter, Arial, sans-serif';
        ctx.fillStyle = '#475569';
        ctx.fillText('HEIC ÂõæÁâáËΩ¨ JPG Âú®Á∫øËΩ¨Êç¢Âô®', 80, 290);

        // === Feature pills ===
        const pills = [
            { emoji: 'üîí', text: '100% Private', color: '#10b981' },
            { emoji: '‚ö°', text: 'Lightning Fast', color: '#f59e0b' },
            { emoji: 'üì¶', text: 'Batch Convert', color: '#6366f1' },
            { emoji: 'üåê', text: 'No Upload Needed', color: '#3b82f6' },
        ];

        let pillX = 80;
        const pillY = 340;
        pills.forEach(pill => {
            ctx.font = '600 20px Inter, Arial, sans-serif';
            const textW = ctx.measureText(pill.emoji + ' ' + pill.text).width;
            const pw = textW + 36;
            const ph = 44;
            const pr = 22;

            // Pill background
            ctx.fillStyle = pill.color + '15';
            ctx.strokeStyle = pill.color + '40';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(pillX + pr, pillY);
            ctx.lineTo(pillX + pw - pr, pillY);
            ctx.quadraticCurveTo(pillX + pw, pillY, pillX + pw, pillY + pr);
            ctx.lineTo(pillX + pw, pillY + ph - pr);
            ctx.quadraticCurveTo(pillX + pw, pillY + ph, pillX + pw - pr, pillY + ph);
            ctx.lineTo(pillX + pr, pillY + ph);
            ctx.quadraticCurveTo(pillX, pillY + ph, pillX, pillY + ph - pr);
            ctx.lineTo(pillX, pillY + pr);
            ctx.quadraticCurveTo(pillX, pillY, pillX + pr, pillY);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();

            // Pill text
            ctx.fillStyle = '#374151';
            ctx.fillText(pill.emoji + ' ' + pill.text, pillX + 18, pillY + 30);

            pillX += pw + 16;
        });

        // === Bottom tagline ===
        ctx.font = '500 22px Inter, Arial, sans-serif';
        ctx.fillStyle = '#94a3b8';
        ctx.fillText('Free ¬∑ No Installation ¬∑ Works in Any Browser', 80, 470);

        ctx.font = '500 20px Inter, Arial, sans-serif';
        ctx.fillStyle = '#94a3b8';
        ctx.fillText('ÂÖçË¥π ¬∑ Êó†ÈúÄÂÆâË£Ö ¬∑ ÊîØÊåÅÊâÄÊúâÁé∞‰ª£ÊµèËßàÂô®', 80, 505);

        // === URL at bottom (reads from input) ===
        var displayDomain = (document.getElementById('domainInput') || {}).value || 'heic2jpg.pages.dev';
        ctx.font = '600 20px Inter, Arial, sans-serif';
        ctx.fillStyle = '#3b82f6';
        ctx.fillText('üåê ' + displayDomain, 80, 575);

        // === Right side: conversion visual ===
        // HEIC file icon
        drawFileIcon(ctx, 850, 140, '.HEIC', '#f59e0b', '#fef3c7');
        // Arrow
        drawArrow(ctx, 960, 220);
        // JPG file icon
        drawFileIcon(ctx, 1020, 140, '.JPG', '#10b981', '#d1fae5');

        // === Privacy badge at bottom-right ===
        const badgeX = 900, badgeY = 540;
        ctx.fillStyle = '#f0fdf4';
        ctx.strokeStyle = '#bbf7d0';
        ctx.lineWidth = 1.5;
        const bw = 250, bh = 40, br = 20;
        ctx.beginPath();
        ctx.moveTo(badgeX + br, badgeY);
        ctx.lineTo(badgeX + bw - br, badgeY);
        ctx.quadraticCurveTo(badgeX + bw, badgeY, badgeX + bw, badgeY + br);
        ctx.lineTo(badgeX + bw, badgeY + bh - br);
        ctx.quadraticCurveTo(badgeX + bw, badgeY + bh, badgeX + bw - br, badgeY + bh);
        ctx.lineTo(badgeX + br, badgeY + bh);
        ctx.quadraticCurveTo(badgeX, badgeY + bh, badgeX, badgeY + bh - br);
        ctx.lineTo(badgeX, badgeY + br);
        ctx.quadraticCurveTo(badgeX, badgeY, badgeX + br, badgeY);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();

        // Green dot
        ctx.fillStyle = '#22c55e';
        ctx.beginPath();
        ctx.arc(badgeX + 20, badgeY + 20, 5, 0, Math.PI * 2);
        ctx.fill();

        ctx.font = '600 16px Inter, Arial, sans-serif';
        ctx.fillStyle = '#166534';
        ctx.fillText('‚úì 100% Client-side ¬∑ Private', badgeX + 35, badgeY + 26);
    }

    function drawFileIcon(ctx, x, y, label, color, bgColor) {
        const w = 90, h = 110, r = 12, fold = 24;

        // Shadow
        ctx.fillStyle = 'rgba(0,0,0,0.06)';
        ctx.beginPath();
        ctx.moveTo(x + r + 3, y + 3);
        ctx.lineTo(x + w - fold + 3, y + 3);
        ctx.lineTo(x + w + 3, y + fold + 3);
        ctx.lineTo(x + w + 3, y + h - r + 3);
        ctx.quadraticCurveTo(x + w + 3, y + h + 3, x + w - r + 3, y + h + 3);
        ctx.lineTo(x + r + 3, y + h + 3);
        ctx.quadraticCurveTo(x + 3, y + h + 3, x + 3, y + h - r + 3);
        ctx.lineTo(x + 3, y + r + 3);
        ctx.quadraticCurveTo(x + 3, y + 3, x + r + 3, y + 3);
        ctx.closePath();
        ctx.fill();

        // File body
        ctx.fillStyle = bgColor;
        ctx.strokeStyle = color + '60';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x + r, y);
        ctx.lineTo(x + w - fold, y);
        ctx.lineTo(x + w, y + fold);
        ctx.lineTo(x + w, y + h - r);
        ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
        ctx.lineTo(x + r, y + h);
        ctx.quadraticCurveTo(x, y + h, x, y + h - r);
        ctx.lineTo(x, y + r);
        ctx.quadraticCurveTo(x, y, x + r, y);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();

        // Fold
        ctx.fillStyle = color + '20';
        ctx.strokeStyle = color + '40';
        ctx.lineWidth = 1.5;
        ctx.beginPath();
        ctx.moveTo(x + w - fold, y);
        ctx.lineTo(x + w - fold, y + fold);
        ctx.lineTo(x + w, y + fold);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();

        // Label
        ctx.font = '800 22px Inter, Arial, sans-serif';
        ctx.fillStyle = color;
        ctx.textAlign = 'center';
        ctx.fillText(label, x + w / 2, y + h / 2 + 20);
        ctx.textAlign = 'left';
    }

    function drawArrow(ctx, x, y) {
        ctx.strokeStyle = '#94a3b8';
        ctx.lineWidth = 3;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        // Arrow body
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x + 40, y);
        ctx.stroke();

        // Arrow head
        ctx.beginPath();
        ctx.moveTo(x + 30, y - 10);
        ctx.lineTo(x + 42, y);
        ctx.lineTo(x + 30, y + 10);
        ctx.stroke();

        // Label
        ctx.font = '500 14px Inter, Arial, sans-serif';
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'center';
        ctx.fillText('convert', x + 20, y - 18);
        ctx.textAlign = 'left';
    }

    // Wait for font to load, then draw
    document.fonts.ready.then(() => {
        setTimeout(drawOGImage, 200);
    });

    function downloadImage() {
        const canvas = document.getElementById('canvas');
        const link = document.createElement('a');
        link.download = 'og-image.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
    }
    </script>
</body>
</html>
